<div class="flex flex-col gap-y-1">
  <div class="flex flex-col space-y-1">
    <p class="text-xs">{{ this.activeTypers() }}</p>
    @if (this.replyTarget()) {
      <div
        class="flex flex-row justify-between items-center py-1 pr-4 pl-8 border border-surface-600 rounded-lg bg-surface-700">
        <p class="text-xs">
          Replying to
          <span class="font-semibold">{{
            this.userService.getUsername(this.replyTarget()!.authorId)
          }}</span>
        </p>
        <p-button
          icon="pi pi-times"
          (click)="cancelReply()"
          styleClass="p-button-sm p-button-text p-button-rounded p-button-secondary !w-6 !h-6">
        </p-button>
      </div>
    }
  </div>

  <form (submit)="sendMessage()">
    <textarea
      pTextarea
      autoResize
      [ngModel]="message()"
      (ngModelChange)="onInputChange($event)"
      (blur)="onBlur()"
      (focus)="onFocus()"
      name="message"
      rows="1"
      class="w-full !py-4 !pl-8 !text-sm !bg-surface-700 rounded-lg border !border-surface-600 !focus:outline-none !focus:ring-2 !focus:ring-primary"
      [placeholder]="placeholderMessage()"
      (keydown)="handleKeydown($event)"
      style="max-height: 300px; overflow-y: auto"></textarea>
  </form>
</div>
