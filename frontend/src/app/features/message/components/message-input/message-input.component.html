<div class="flex flex-col space-y-2">
  <div class="flex flex-col space-y-1">
    <p class="text-xs">{{ this.activeTypers() }}</p>
    @if (this.replyTarget()) {
      <p class="text-xs">
        Replying to {{ this.userService.getUsername(this.replyTarget()!.authorId) }}
      </p>
    }
  </div>

  <form (submit)="sendMessage()">
    <textarea
      pTextarea
      autoResize
      [ngModel]="message()"
      (ngModelChange)="onInputChange($event)"
      (blur)="onBlur()"
      (focus)="onFocus()"
      name="message"
      rows="1"
      class="w-full !py-4 !pl-8 !text-sm !bg-surface-700 rounded-lg border !border-surface-600 !focus:outline-none !focus:ring-2 !focus:ring-primary"
      [placeholder]="placeholderMessage()"
      (keydown)="handleKeydown($event)"
      style="max-height: 300px; overflow-y: auto"></textarea>
  </form>
</div>
